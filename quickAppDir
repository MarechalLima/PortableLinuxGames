#!/bin/bash
# Author : Ismael BarrosÂ² <ismael@barros2.org>
# License : BSD http://en.wikipedia.org/wiki/BSD_license

pg4l_dir=$(dirname $(readlink -f $0))

if [ -z "$*" ]; then
	echo "Usage: $0 [binary]"
fi

if [ -f "$1" -a "${1##*.}" = "jar" ]; then
	cp -v "$pg4l_dir"/AppRun_java AppRun || exit 1
else
	cp -v "$pg4l_dir"/AppRun_quick AppRun || exit 1
fi

for i in util.sh AppRun.desktop AppRun.png; do
	{ [ -f "$i" ] || cp -v "$pg4l_dir"/"$i" "$i"; } || exit 1
done

if [ $1 ]; then
	sed -e "s|_BINARY_|$1|g" AppRun -i
fi
